require("colors");

import {
        atMessagesParser,
        AtMessage
} from "../lib/index";
import { readFileSync } from "fs";

let atMessages: AtMessage[];
let expect: string;
let test: string;

test = "very long CMGL list with injected unsolicited messages";

let rawAtMessages = readFileSync(
  __dirname + "/../../res/longInput.txt",
  { "encoding": "utf8" }
);

rawAtMessages= rawAtMessages.replace(/\\n/g, "\n");
rawAtMessages= rawAtMessages.replace(/\\r/g, "\r");
rawAtMessages= rawAtMessages.replace(/\\"/g, '"');

//console.log("rawAtMessages: \n".blue, rawAtMessages);
//console.log(JSON.stringify(atMessages, null, 2).blue);

atMessages = atMessagesParser(rawAtMessages);

expect = String.raw
`[
  {
    "raw": "\r\n+CMGL: 0,0,,159\r\n07913306091093F0400B913336766883F50008712060004091408C050003640D0100490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E\r\n+CMGL: 1,0,,159\r\n07913306091093F0400B913336766883F50008712060004002408C050003640D0200670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031\r\n+CMGL: 2,0,,159\r\n07913306091093F0400B913336766883F50008712060004012408C050003640D03000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F\r\n+CMGL: 3,0,,159\r\n07913306091093F0400B913336766883F50008712060004022408C050003640D04006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F60\r\n+CMGL: 4,0,,159\r\n07913306091093F0400B913336766883F50008712060004032408C050003640D050031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C\r\n+CMGL: 5,0,,159\r\n07913306091093F0400B913336766883F50008712060004042408C050003640D06006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067006500210020\r\n+CMGL: 6,0,,159\r\n07913306091093F0400B913336766883F50008712060004052408C050003640D071F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020\r\n+CMGL: 7,0,,159\r\n07913306091093F0400B913336766883F50008712060004062408C050003640D08006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D0065007300730061006700650021\r\n+CMGL: 8,0,,159\r\n07913306091093F0400B913336766883F50008712060004072408C050003640D0900201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C006400200061\r\n+CMGL: 9,0,,159\r\n07913306091093F0400B913336766883F50008712060004082408C050003640D0A0020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065\r\n+CMGL: 10,0,,159\r\n07913306091093F0400B913336766883F50008712060004092408C050003640D0B002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C00640020\r\n+CMGL: 11,0,,159\r\n07913306091093F0400B913336766883F50008712060004003408C050003640D0C00610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067\r\n+CMGL: 12,0,,143\r\n07913306091093F0400B913336766883F50008712060004013407C050003640D0D0065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031\r\n+CMGL: 13,0,,159\r\n07913306091093F0400B913336766883F50008712060004023408C050003650D0100490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E\r\n+CMGL: 14,0,,159\r\n07913306091093F0400B913336766883F50008712060004033408C050003650D0200670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031\r\n+CMGL: 15,0,,159\r\n07913306091093F0400B913336766883F50008712060004043408C050003650D03000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F\r\n+CMGL: 16,0,,159\r\n07913306091093F0400B913336766883F50008712060004053408C050003650D04006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F60\r\n+CMGL: 17,0,,159\r\n07913306091093F0400B913336766883F50008712060004063408C050003650D050031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C\r\n+CMGL: 18,0,,159\r\n07913306091093F0400B913336766883F50008712060004073408C050003650D06006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067006500210020\r\n+CMGL: 19,0,,159\r\n07913306091093F0400B913336766883F50008712060004083408C050003650D071F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020\r\n+CMGL: 20,0,,26\r\n07913306092029F0040B913336766883F500007120600040034007C413F9443E9101\r\n+CMGL: 21,0,,22\r\n07913306092011F0040B913336766883F500007120600040134003443219\r\n+CMGL: 22,0,,22\r\n07913306092069F0040B913336766883F500007120600040134003433C1E\r\n+CMGL: 23,0,,22\r\n07913306092069F0040B913336766883F500007120600040134003583C1E\r\n+CMGL: 24,0,,26\r\n07913306092011F0040B913336766883F500007120600040234007783C994C26E301\r\n+CMGL: 25,0,,23\r\n07913306092029F0040B913336766883F50000712060004023400444B3D90C\r\n+CMGL: 26,0,,22\r\n07913306092029F0040B913336766883F50000712060004023400346B319\r\n+CMGL: 27,0,,25\r\n07913306092029F0040B913336766883F500007120600040334006663C1E8F3703\r\n",
    "id": "LIST",
    "atMessages": [
      {
        "raw": "\r\n+CMGL: 0,0,,159\r\n07913306091093F0400B913336766883F50008712060004091408C050003640D0100490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E",
        "id": "P_CMGL_SET",
        "index": 0,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004091408C050003640D0100490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 1,0,,159\r\n07913306091093F0400B913336766883F50008712060004002408C050003640D0200670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031",
        "id": "P_CMGL_SET",
        "index": 1,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004002408C050003640D0200670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 2,0,,159\r\n07913306091093F0400B913336766883F50008712060004012408C050003640D03000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F",
        "id": "P_CMGL_SET",
        "index": 2,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004012408C050003640D03000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 3,0,,159\r\n07913306091093F0400B913336766883F50008712060004022408C050003640D04006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F60",
        "id": "P_CMGL_SET",
        "index": 3,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004022408C050003640D04006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F60",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 4,0,,159\r\n07913306091093F0400B913336766883F50008712060004032408C050003640D050031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C",
        "id": "P_CMGL_SET",
        "index": 4,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004032408C050003640D050031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 5,0,,159\r\n07913306091093F0400B913336766883F50008712060004042408C050003640D06006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067006500210020",
        "id": "P_CMGL_SET",
        "index": 5,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004042408C050003640D06006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067006500210020",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 6,0,,159\r\n07913306091093F0400B913336766883F50008712060004052408C050003640D071F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020",
        "id": "P_CMGL_SET",
        "index": 6,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004052408C050003640D071F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 7,0,,159\r\n07913306091093F0400B913336766883F50008712060004062408C050003640D08006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D0065007300730061006700650021",
        "id": "P_CMGL_SET",
        "index": 7,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004062408C050003640D08006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D0065007300730061006700650021",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 8,0,,159\r\n07913306091093F0400B913336766883F50008712060004072408C050003640D0900201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C006400200061",
        "id": "P_CMGL_SET",
        "index": 8,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004072408C050003640D0900201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C006400200061",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 9,0,,159\r\n07913306091093F0400B913336766883F50008712060004082408C050003640D0A0020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065",
        "id": "P_CMGL_SET",
        "index": 9,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004082408C050003640D0A0020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 10,0,,159\r\n07913306091093F0400B913336766883F50008712060004092408C050003640D0B002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C00640020",
        "id": "P_CMGL_SET",
        "index": 10,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004092408C050003640D0B002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C00640020",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 11,0,,159\r\n07913306091093F0400B913336766883F50008712060004003408C050003640D0C00610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067",
        "id": "P_CMGL_SET",
        "index": 11,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004003408C050003640D0C00610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 12,0,,143\r\n07913306091093F0400B913336766883F50008712060004013407C050003640D0D0065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031",
        "id": "P_CMGL_SET",
        "index": 12,
        "stat": 0,
        "length": 143,
        "pdu": "07913306091093F0400B913336766883F50008712060004013407C050003640D0D0065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 13,0,,159\r\n07913306091093F0400B913336766883F50008712060004023408C050003650D0100490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E",
        "id": "P_CMGL_SET",
        "index": 13,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004023408C050003650D0100490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 14,0,,159\r\n07913306091093F0400B913336766883F50008712060004033408C050003650D0200670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031",
        "id": "P_CMGL_SET",
        "index": 14,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004033408C050003650D0200670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 15,0,,159\r\n07913306091093F0400B913336766883F50008712060004043408C050003650D03000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F",
        "id": "P_CMGL_SET",
        "index": 15,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004043408C050003650D03000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 16,0,,159\r\n07913306091093F0400B913336766883F50008712060004053408C050003650D04006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F60",
        "id": "P_CMGL_SET",
        "index": 16,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004053408C050003650D04006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F60",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 17,0,,159\r\n07913306091093F0400B913336766883F50008712060004063408C050003650D050031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C",
        "id": "P_CMGL_SET",
        "index": 17,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004063408C050003650D050031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 18,0,,159\r\n07913306091093F0400B913336766883F50008712060004073408C050003650D06006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067006500210020",
        "id": "P_CMGL_SET",
        "index": 18,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004073408C050003650D06006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D00650073007300610067006500210020",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 19,0,,159\r\n07913306091093F0400B913336766883F50008712060004083408C050003650D071F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020",
        "id": "P_CMGL_SET",
        "index": 19,
        "stat": 0,
        "length": 159,
        "pdu": "07913306091093F0400B913336766883F50008712060004083408C050003650D071F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020006C006F006E00670020006D006500730073006100670065002100201F600031000A00490020006200750069006C0064002000610020",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 20,0,,26\r\n07913306092029F0040B913336766883F500007120600040034007C413F9443E9101",
        "id": "P_CMGL_SET",
        "index": 20,
        "stat": 0,
        "length": 26,
        "pdu": "07913306092029F0040B913336766883F500007120600040034007C413F9443E9101",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 21,0,,22\r\n07913306092011F0040B913336766883F500007120600040134003443219",
        "id": "P_CMGL_SET",
        "index": 21,
        "stat": 0,
        "length": 22,
        "pdu": "07913306092011F0040B913336766883F500007120600040134003443219",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 22,0,,22\r\n07913306092069F0040B913336766883F500007120600040134003433C1E",
        "id": "P_CMGL_SET",
        "index": 22,
        "stat": 0,
        "length": 22,
        "pdu": "07913306092069F0040B913336766883F500007120600040134003433C1E",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 23,0,,22\r\n07913306092069F0040B913336766883F500007120600040134003583C1E",
        "id": "P_CMGL_SET",
        "index": 23,
        "stat": 0,
        "length": 22,
        "pdu": "07913306092069F0040B913336766883F500007120600040134003583C1E",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 24,0,,26\r\n07913306092011F0040B913336766883F500007120600040234007783C994C26E301",
        "id": "P_CMGL_SET",
        "index": 24,
        "stat": 0,
        "length": 26,
        "pdu": "07913306092011F0040B913336766883F500007120600040234007783C994C26E301",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 25,0,,23\r\n07913306092029F0040B913336766883F50000712060004023400444B3D90C",
        "id": "P_CMGL_SET",
        "index": 25,
        "stat": 0,
        "length": 23,
        "pdu": "07913306092029F0040B913336766883F50000712060004023400444B3D90C",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 26,0,,22\r\n07913306092029F0040B913336766883F50000712060004023400346B319",
        "id": "P_CMGL_SET",
        "index": 26,
        "stat": 0,
        "length": 22,
        "pdu": "07913306092029F0040B913336766883F50000712060004023400346B319",
        "statName": "REC_UNREAD"
      },
      {
        "raw": "\r\n+CMGL: 27,0,,25\r\n07913306092029F0040B913336766883F500007120600040334006663C1E8F3703",
        "id": "P_CMGL_SET",
        "index": 27,
        "stat": 0,
        "length": 25,
        "pdu": "07913306092029F0040B913336766883F500007120600040334006663C1E8F3703",
        "statName": "REC_UNREAD"
      }
    ]
  },
  {
    "raw": "\r\n^RSSI:19\r\n",
    "id": "CX_RSSI_URC",
    "isUnsolicited": true
  },
  {
    "raw": "\r\n^RSSI:19\r\n",
    "id": "CX_RSSI_URC",
    "isUnsolicited": true
  },
  {
    "raw": "\r\nOK\r\n",
    "id": "OK",
    "isFinal": true
  },
  {
    "raw": "\r\n+CMTI: \"SM\",28\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 28
  },
  {
    "raw": "\r\n+CMTI: \"SM\",29\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 29
  },
  {
    "raw": "\r\n+CMTI: \"SM\",30\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 30
  },
  {
    "raw": "\r\n+CMTI: \"SM\",31\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 31
  },
  {
    "raw": "\r\n+CMTI: \"SM\",32\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 32
  },
  {
    "raw": "\r\n+CMTI: \"SM\",33\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 33
  },
  {
    "raw": "\r\n+CMTI: \"SM\",34\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 34
  },
  {
    "raw": "\r\n+CMTI: \"SM\",35\r\n",
    "id": "P_CMTI_URC",
    "isUnsolicited": true,
    "mem": "SM",
    "index": 35
  }
]`;

console.assert(expect === JSON.stringify(atMessages, null, 2),
  `Fail test ${test}`.red);
console.log(`Pass test ${test}`.green);
